<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Portfolio</title>
    <style>
      .container {
        font-family: monospace;
        background: oklch(26.9% 0 0);
        color: white;
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 2rem;
      }

      .scanlines {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 300;
        opacity: 0.6;
        background: linear-gradient(
          to bottom,
          transparent 50%,
          rgba(0, 0, 0, 0.5) 51%
        );
        background-size: 100% 6px;
        animation:
          scanlines-move 0.2s linear infinite,
          scanlines-flicker 3.6s linear infinite;
      }

      @keyframes scanlines-move {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: 0px 6px;
        }
      }

      @keyframes scanlines-flicker {
        0% {
          opacity: 0.6;
        }
        16.67% {
          opacity: 0.3;
        }
        33.33% {
          opacity: 0.5;
        }
        45.83% {
          opacity: 0.8;
        }
        62.5% {
          opacity: 0.4;
        }
        79.17% {
          opacity: 0.7;
        }
        100% {
          opacity: 0.6;
        }
      }

      /* Top bar */
      .top-bar {
        display: flex;
        justify-content: space-between;
        font-size: 2.25rem;
      }

      /* VHS text with glitch effect */
      .vhs-text {
        animation: vhs-glitch 0.75s steps(9) infinite alternate;
      }
      /* Time display */
      .time {
        animation: time-glitch 0.45s steps(9) infinite alternate;
      }

      /* Center loading text */
      .center-text {
        width: 100%;
        text-align: center;
        font-size: 3rem;
        animation: counter-glitch 0.45s steps(9) infinite alternate;
      }

      /* Bottom counter */
      .counter {
        font-size: 2.25rem;
        animation: counter-glitch 0.45s steps(9) infinite alternate;
      }

      /* Loading dots animation */
      .loading-dots::after {
        content: "";
        animation: loading-dots 1.5s steps(4, end) infinite;
      }

      @keyframes loading-dots {
        0% {
          content: "";
        }
        25% {
          content: ".";
        }
        50% {
          content: "..";
        }
        75% {
          content: "...";
        }
        100% {
          content: "";
        }
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }
        .top-bar {
          font-size: 2rem;
        }
        .center-text {
          font-size: 2.5rem;
        }
        .counter {
          font-size: 2rem;
        }
      }

      @keyframes glitch {
        0% {
          text-shadow:
            0 0 6px rgba(255, 150, 150, 0.5),
            0 0 8px rgba(255, 80, 80, 0.7),
            0 0 10px rgba(255, 0, 0, 0.6);
        }
        33% {
          text-shadow:
            2px 0 4px rgba(255, 80, 80, 0.6),
            0 2px 4px rgba(255, 40, 40, 0.6),
            0 0 8px rgba(200, 0, 0, 0.5);
        }
        66% {
          text-shadow:
            -2px 0 4px rgba(255, 80, 80, 0.6),
            0 -2px 4px rgba(255, 40, 40, 0.6),
            0 0 8px rgba(200, 0, 0, 0.5);
        }
      }

      .vhs-text {
        animation: glitch 0.25s steps(9) infinite alternate;
      }

      .time,
      .counter {
        animation: glitch 0.15s steps(9) infinite alternate;
      }

      .center-text {
        animation: glitch 0.2s steps(9) infinite alternate;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <div id="preloader">
      <div class="scanlines"></div>

      <div class="container">
        <div class="top-bar">
          <div class="vhs-text">VHS</div>
          <div class="time" id="time">00:00:00</div>
        </div>

        <div class="center-text">
          <span class="loading-dots">Loading</span>
        </div>

        <div class="counter">REC <span id="counter">00:00</span></div>
      </div>
    </div>

    <script>
      function pad(val) {
        return val < 10 ? "0" + val : val;
      }

      // Counter
      let totalSeconds = 0;
      setInterval(() => {
        totalSeconds++;
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        document.getElementById("counter").textContent =
          `${pad(minutes)}:${pad(seconds)}`;
      }, 1000);

      // Clock
      function updateClock() {
        const now = new Date();
        const h = now.getHours();
        const m = pad(now.getMinutes());
        const s = pad(now.getSeconds());
        document.getElementById("time").textContent = `${h}:${m}:${s}`;
      }
      updateClock();
      setInterval(updateClock, 1000);

      // Hide preloader after window load
      window.addEventListener("load", () => {
        const preloader = document.getElementById("preloader");
        preloader.style.transition = "opacity 0.5s ease";
        preloader.style.opacity = "0";
        setTimeout(() => {
          preloader.style.display = "none";
        }, 500);
      });
    </script>
  </body>
</html>
